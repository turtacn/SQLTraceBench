
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQLTraceBench Report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; max-width: 1000px; margin: 0 auto; padding: 20px; }
        h1, h2 { color: #2c3e50; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .summary-card { background: #f8f9fa; border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin-bottom: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .metric-box { text-align: center; }
        .metric-val { font-size: 24px; font-weight: bold; color: #007bff; }
        .metric-label { color: #666; font-size: 14px; }
        .pass { color: #28a745; font-weight: bold; }
        .fail { color: #dc3545; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .chart-container { position: relative; height: 300px; width: 100%; margin-bottom: 40px; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>SQLTraceBench Validation Report</h1>

    <div class="summary-card">
        <div class="metric-box">
            <div class="metric-val" style="color: #28a745">PASS</div>
            <div class="metric-label">Status</div>
        </div>
        <div class="metric-box">
            <div class="metric-val">171.69</div>
            <div class="metric-label">Base QPS</div>
        </div>
        <div class="metric-box">
            <div class="metric-val">170.47</div>
            <div class="metric-label">Candidate QPS</div>
        </div>
        <div class="metric-box">
            <div class="metric-val">0.05%</div>
            <div class="metric-label">Threshold</div>
        </div>
    </div>

    <p>Validation passed. Candidate QPS of 170.47 is within the 5.00% threshold of the base QPS of 171.69 (difference of -1.22, -0.71%).</p>

    <h2>Latency Distribution</h2>
    <div class="chart-container">
        <canvas id="latencyChart"></canvas>
    </div>

    <h2>Detailed Metrics</h2>
    <table>
        <thead>
            <tr>
                <th>Metric</th>
                <th>Base</th>
                <th>Candidate</th>
                <th>Delta</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Total Queries</td>
                <td>2</td>
                <td>2</td>
                <td>0</td>
            </tr>
            <tr>
                <td>QPS</td>
                <td>171.69</td>
                <td>170.47</td>
                <td>-1.22</td>
            </tr>
            <tr>
                <td>P50 Latency</td>
                <td>1.175249ms</td>
                <td>1.192789ms</td>
                <td>-</td>
            </tr>
            <tr>
                <td>P90 Latency</td>
                <td>1.175249ms</td>
                <td>1.192789ms</td>
                <td>-</td>
            </tr>
            <tr>
                <td>P99 Latency</td>
                <td>1.175249ms</td>
                <td>1.192789ms</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Errors</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
    </table>

    <script>
        const ctx = document.getElementById('latencyChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['P50', 'P90', 'P99'],
                datasets: [{
                    label: 'Base',
                    data: [
                         1 ,
                         1 ,
                         1
                    ],
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }, {
                    label: 'Candidate',
                    data: [
                         1 ,
                         1 ,
                         1
                    ],
                    backgroundColor: 'rgba(255, 99, 132, 0.5)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Latency (ms)'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
